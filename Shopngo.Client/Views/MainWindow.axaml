<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Shopngo.Client.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:asyncImageLoader="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="Shopngo.Client.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="Shop'n'Go">

    <Design.DataContext>
        <vm:MainWindowViewModel />
    </Design.DataContext>

    <Grid RowDefinitions="Auto, *">
        <!-- Header -->
        <Border Grid.Row="0" Background="#212121" Padding="20">
            <StackPanel Orientation="Horizontal" Spacing="4">
                <TextBlock Text="Shop'n'Go" FontSize="24" FontWeight="Bold" Foreground="White" />
                <TextBlock Text="Desktop Edition lol" VerticalAlignment="Bottom" Foreground="#AAAAAA" />
            </StackPanel>
        </Border>

        <!-- Product Grid -->
        <ScrollViewer Grid.Row="1" Padding="4">
            <ItemsControl ItemsSource="{Binding Products}" Margin="20,20,20,100">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel HorizontalAlignment="Center" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <!-- Product Card -->
                        <Border Width="220" Margin="10" Background="#2D2D2D" CornerRadius="8" Padding="15"
                                BoxShadow="0 4 10 0 #10000000">
                            <StackPanel Spacing="12">

                                <!-- Image -->
                                <Border CornerRadius="6" ClipToBounds="True" Background="White" Height="160">
                                    <Image asyncImageLoader:ImageLoader.Source="{Binding Image}"
                                           Stretch="Uniform" Margin="10" />
                                </Border>

                                <!-- Title -->
                                <TextBlock Text="{Binding Title}"
                                           Foreground="White"
                                           TextTrimming="CharacterEllipsis"
                                           MaxLines="2"
                                           Height="40"
                                           FontSize="14"
                                           FontWeight="SemiBold" />

                                <!-- Rating Row (Your new addition) -->
                                <StackPanel Orientation="Horizontal" Spacing="5">
                                    <TextBlock Text="â­" FontSize="12" />
                                    <TextBlock Text="{Binding Rating.Rate}" Foreground="#FFD700" FontWeight="Bold" />
                                    <TextBlock Text="{Binding Rating.Count, StringFormat='({0})'}" Foreground="#888888"
                                               FontSize="12" />
                                </StackPanel>

                                <!-- Price -->
                                <TextBlock Text="{Binding Price, StringFormat='${0:F2}'}"
                                           Foreground="#4CAF50"
                                           FontSize="18"
                                           FontWeight="Bold" />
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Loading Indicator -->
        <ProgressBar Grid.Row="1"
                     IsIndeterminate="True"
                     IsVisible="{Binding IsLoading}"
                     VerticalAlignment="Top"
                     Background="Transparent"
                     Foreground="#4CAF50"
                     Height="4" />
    </Grid>

</Window>